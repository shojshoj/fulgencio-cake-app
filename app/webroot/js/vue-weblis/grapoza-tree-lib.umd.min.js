/**
 * Skipped minification because the original files appears to be already minified.
 * Original file: /npm/@grapoza/vue-tree@5.1.0/dist/grapoza-tree-lib.umd.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
(function(L,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(L=typeof globalThis<"u"?globalThis:L||self,e(L.grapozaTreeLib={},L.Vue))})(this,function(L,e){"use strict";const V=Object.freeze({None:null,Single:"single",Multiple:"multiple",SelectionFollowsFocus:"selectionFollowsFocus"});function he(){function n(){const l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let f="grt-";do f+=l.charAt(Math.floor(Math.random()*l.length));while(f.length<8||document.getElementById(f));return f}function r(l,f){const s=l.treeNodeSpec.idProperty,u=l[s],h=l[l.treeNodeSpec.childrenProperty];if(document.getElementById(`${f}-${u}`)){let t=1;for(;document.getElementById(`${f}-${u}-${t}`);)t++;l[s]=`${u}-${t}`}h.forEach(t=>r(t,f))}return{generateUniqueId:n,resolveNodeIdConflicts:r}}function oe(n){function r(s){f(s,!1)}function l(s){f(s,!0)}function f(s,u){if(n.value.length===0)return;let h=n.value.slice(),t=!0;for(;h.length>0&&t!==!1;){let o=h.shift(),a=o.treeNodeSpec.childrenProperty;Array.isArray(o[a])&&(h=u?o[a].concat(h):h.concat(o[a])),t=s(o)}}return{breadthFirstTraverse:r,depthFirstTraverse:l}}function me(){function n(l){return e.unref(l).treeNodeSpec.expandable===!0}function r(l){return e.unref(l).treeNodeSpec.state.expanded===!0}return{isExpandable:n,isExpanded:r}}function O(){const{isExpanded:n}=me();function r(o){e.unref(o).treeNodeSpec.focusable=!0}function l(o){e.unref(o).treeNodeSpec.focusable=!1}function f(o){return e.unref(o).treeNodeSpec.focusable===!0}function s(o){o.length>0&&r(o[0])}function u(o){let a=o[o.length-1],p=a[a.treeNodeSpec.childrenProperty];for(;p.length>0&&n(a);)a=p[p.length-1],p=a[a.treeNodeSpec.childrenProperty];r(a)}function h(o,a,p){let y=o.indexOf(a),N=a[a.treeNodeSpec.childrenProperty];if(!p&&N.length>0&&n(a))r(N[0]);else if(y<o.length-1)r(o[y+1]);else return!1;return!0}function t(o,a){let p=o.indexOf(a);if(p!==0){let y=o[p-1],N=y[y.treeNodeSpec.childrenProperty];for(;N.length>0&&n(y);)y=N[N.length-1],N=y[y.treeNodeSpec.childrenProperty];return r(y),!0}return!1}return{focus:r,focusFirst:s,focusLast:u,focusNext:h,focusPrevious:t,isFocused:f,unfocus:l}}function Pe(){const{unfocus:n}=O(),r=e.ref(null);function l(f){r.value!==f&&(r.value&&n(r),r.value=f)}return{focusableNodeModel:r,handleFocusableChange:l}}function Z(){function n(u){e.unref(u).treeNodeSpec.state.selected=!0}function r(u){e.unref(u).treeNodeSpec.state.selected=!1}function l(u,h){e.unref(u).treeNodeSpec.state.selected=h}function f(u){return e.unref(u).treeNodeSpec.selectable===!0}function s(u){return e.unref(u).treeNodeSpec.state.selected===!0}return{deselect:r,isSelectable:f,isSelected:s,setSelected:l,select:n}}const i=Object.freeze({RootNodesLoad:"treeRootNodesLoad",Click:"treeNodeClick",DoubleClick:"treeNodeDblclick",CheckboxChange:"treeNodeCheckboxChange",ChildCheckboxChange:"treeNodeChildCheckboxChange",RadioChange:"treeNodeRadioChange",ExpandedChange:"treeNodeExpandedChange",ChildrenLoad:"treeNodeChildrenLoad",SelectedChange:"treeNodeSelectedChange",FocusableChange:"treeNodeAriaFocusableChange",RequestFirstFocus:"treeNodeAriaRequestFirstFocus",RequestLastFocus:"treeNodeAriaRequestLastFocus",RequestParentFocus:"treeNodeAriaRequestParentFocus",RequestPreviousFocus:"treeNodeAriaRequestPreviousFocus",RequestNextFocus:"treeNodeAriaRequestNextFocus",Add:"treeNodeAdd",Delete:"treeNodeDelete",DragMove:"treeNodeDragMove",Drop:"treeNodeDrop"});function Ae(n,r,l,f){const{depthFirstTraverse:s}=oe(n),{deselect:u,isSelectable:h,isSelected:t,select:o}=Z();e.watch(r,p),e.watch(l,m=>{e.unref(r)===V.SelectionFollowsFocus&&x(m)});const a=e.computed(()=>r.value===V.None?null:r.value===V.Multiple);function p(){e.unref(r)===V.Single?y():e.unref(r)===V.SelectionFollowsFocus&&N()}function y(){let m=!1;s(c=>{c.treeNodeSpec.state&&t(c)&&(m?u(c):m=!0)})}function N(){s(m=>{let c=m.treeNodeSpec.idProperty,b=l.value.treeNodeSpec.idProperty;m[c]===l.value[b]?h(m)&&o(m):t(m)&&u(m)})}function S(m){e.unref(r)===V.Single&&t(m)&&x(m),f(i.SelectedChange,m)}function x(m){const c=m[m.treeNodeSpec.idProperty];s(b=>t(b)&&b[b.treeNodeSpec.idProperty]!==c?(u(b),!1):!0)}return{ariaMultiselectable:a,enforceSelectionMode:p,handleNodeSelectedChange:S}}const ye=Object.freeze({None:"none",Copy:"copy",Move:"move",Link:"link"}),z=Object.freeze({None:"none",All:"all",Copy:"copy",Move:"move",Link:"link",CopyMove:"copyMove",CopyLink:"copyLink",LinkMove:"linkMove"}),$=Object.freeze({Before:0,After:1,Child:2});function be(){function n(l){return l!==null&&typeof l=="object"&&!Array.isArray(l)}function r(l){let f=JSON.parse(JSON.stringify(l));if(n(f))for(const s of Object.keys(l)){let u=l[s];typeof u=="function"?f[s]=u:n(u)&&(f[s]=r(u))}return f}return{isProbablyObject:n,cheapCopyObject:r}}const{resolveNodeIdConflicts:Se}=he(),{cheapCopyObject:Ie}=be(),{unfocus:Re}=O();function Le(n,r,l,f){function s(h){const t=n.value.indexOf(h);t>-1&&n.value.splice(t,1)}function u(h){let t=h.droppedModel;if(h.isSameTree)if(h.dropEffect===ye.Move)t=f(t[t.treeNodeSpec.idProperty]),t.treeNodeSpec._.dragMoved=!0;else{let o=l(t[t.treeNodeSpec.idProperty]);t=Ie(o),Se(t,r.value),Re(t)}else Se(t,r.value);if(t){let o=h.siblingNodeSet||n.value,a=o.indexOf(h.targetModel);switch(h.targetZone){case $.Before:o.splice(a,0,t);break;case $.After:o.splice(a+1,0,t);break;default:o.push(t);break}t.treeNodeSpec._.dragging=!1}}return{dragMoveNode:s,drop:u}}const B=Object.freeze({Checkbox:"checkbox",RadioButton:"radio"});function qe(n,r,l){const{depthFirstTraverse:f}=oe(n),{isSelectable:s,isSelected:u}=Z();function h(N,S=0){let x=[];return typeof N=="function"&&f(m=>{if(N(m))return x.push(m),S<1||x.length<S}),x}function t(){return h(N=>N.treeNodeSpec.input&&N.treeNodeSpec.input.type===B.Checkbox&&N.treeNodeSpec.state.input.value)}function o(){return h(N=>N.treeNodeSpec.input&&N.treeNodeSpec.input.type===B.RadioButton&&r.value[N.treeNodeSpec.input.name]===N.treeNodeSpec.input.value)}function a(N){let S=null;return typeof N=="string"&&(S=n.value.find(x=>x[x.treeNodeSpec.idProperty]===N),S||f(x=>{if(S=x[x.treeNodeSpec.childrenProperty].find(c=>c[c.treeNodeSpec.idProperty]===N),S)return!1})),S}function p(){return l.value===V.None?[]:h(N=>s(N)&&u(N))}function y(N){let S=null;if(typeof N=="string"){let x=n.value.findIndex(m=>m[m.treeNodeSpec.idProperty]===N);x>-1?S=n.value.splice(x,1)[0]:f(m=>{let c=m[m.treeNodeSpec.childrenProperty];if(x=c.findIndex(b=>b[b.treeNodeSpec.idProperty]===N),x>-1)return S=c.splice(x,1)[0],!1})}return S}return{findById:a,getCheckedCheckboxes:t,getCheckedRadioButtons:o,getMatching:h,getSelected:p,removeById:y}}const{isProbablyObject:ke}=be(),Oe=[z.Copy,z.Move,z.CopyMove,z.None];function $e(n,r,l){function f(){n.value.treeNodeSpec||(n.value.treeNodeSpec={});const t=n.value.treeNodeSpec;s(e.unref(r),t),typeof t.childrenProperty!="string"&&(t.childrenProperty="children"),typeof t.idProperty!="string"&&(t.idProperty="id"),typeof t.labelProperty!="string"&&(t.labelProperty="label"),Array.isArray(n.value[t.childrenProperty])||(n.value[t.childrenProperty]=[]),typeof t.expandable!="boolean"&&(t.expandable=!0),typeof t.selectable!="boolean"&&(t.selectable=!1),typeof t.deletable!="boolean"&&(t.deletable=!1),typeof t.draggable!="boolean"&&(t.draggable=!1),typeof t.allowDrop!="boolean"&&(t.allowDrop=!1),(typeof t.dataTransferEffectAllowed!="string"||!Oe.includes(t.dataTransferEffectAllowed))&&(t.dataTransferEffectAllowed=z.CopyMove),typeof t.focusable!="boolean"&&(t.focusable=!1),typeof t.addChildCallback!="function"&&(t.addChildCallback=null),(typeof t.title!="string"||t.title.trim().length===0)&&(t.title=null),(typeof t.expanderTitle!="string"||t.expanderTitle.trim().length===0)&&(t.expanderTitle=null),(typeof t.addChildTitle!="string"||t.addChildTitle.trim().length===0)&&(t.addChildTitle=null),(typeof t.deleteTitle!="string"||t.deleteTitle.trim().length===0)&&(t.deleteTitle=null),(t.customizations==null||typeof t.customizations!="object")&&(t.customizations={}),typeof t.loadChildrenAsync!="function"&&(t.loadChildrenAsync=null),t._={},t._.dragging=!1,u(t),h(t),n.value.treeNodeSpec=t}function s(t,o){if(ke(t)){const a=JSON.parse(JSON.stringify(t));Object.assign(a,o);for(const p of Object.keys(t)){const y=typeof t[p]=="function"?t[p]:a[p];ke(y)?(o[p]=o[p]||{},s(y,o[p])):(typeof y=="function"&&o[p],o[p]=y)}}}function u(t){let o=t.input;o===null||typeof o!="object"||!Object.values(B).includes(o.type)?t.input=null:((typeof o.name!="string"||o.name.trim().length===0)&&(o.name=null),o.type===B.RadioButton&&((typeof o.name!="string"||o.name.trim().length===0)&&(o.name="unspecifiedRadioName"),(typeof o.value!="string"||o.value.trim().length===0)&&(o.value=n.value[t.labelProperty].replace(/[\s&<>"'\/]/g,"")),l.value.hasOwnProperty(o.name)||(l.value[o.name]=""),o.isInitialRadioGroupValue===!0&&(l.value[o.name]=o.value)))}function h(t){(t.state===null||typeof t.state!="object")&&(t.state={}),(t._.state===null||typeof t._.state!="object")&&(t._.state={});let o=t.state,a=t._.state;a.areChildrenLoaded=typeof t.loadChildrenAsync!="function",a.areChildrenLoading=!1,(typeof o.expanded!="boolean"||!a.areChildrenLoaded)&&(o.expanded=!1),typeof o.selected!="boolean"&&(o.selected=!1),t.input&&((o.input===null||typeof o.input!="object")&&(o.input={}),(o.input.disabled===null||typeof o.input.disabled!="boolean")&&(o.input.disabled=!1),t.input.type===B.Checkbox&&typeof o.input.value!="boolean"&&(o.input.value=!1))}return{normalizeNodeData:f}}function xe(n,r){const l=e.computed(()=>typeof n.value.treeNodeSpec.loadChildrenAsync!="function"||n.value.treeNodeSpec._.state.areChildrenLoaded),f=e.computed(()=>n.value.treeNodeSpec._.state.areChildrenLoading),s=e.computed(()=>{var p;return n.value[(p=n.value.treeNodeSpec.childrenProperty)!=null?p:"children"]}),u=e.computed(()=>s.value&&s.value.length>0),h=e.computed(()=>u.value||!l.value);async function t(){const p=n.value.treeNodeSpec;if(!p._.state.areChildrenLoaded&&!p._.state.areChildrenLoading){p._.state.areChildrenLoading=!0;var y=await p.loadChildrenAsync(n.value);y&&(p._.state.areChildrenLoaded=!0,s.value.splice(0,s.value.length,...y),r(i.ChildrenLoad,n.value)),p._.state.areChildrenLoading=!1}}async function o(){if(n.value.treeNodeSpec.addChildCallback){var p=await n.value.treeNodeSpec.addChildCallback(n.value);p&&(s.value.push(p),r(i.Add,p,n.value))}}function a(p){let y=s.value.indexOf(p);y>-1&&(s.value.splice(y,1),r(i.Delete,p))}return{addChild:o,areChildrenLoaded:l,areChildrenLoading:f,children:s,deleteChild:a,hasChildren:u,loadChildren:t,mayHaveChildren:h}}const j=Object.freeze({Json:"application/json",PlainText:"text/plain",TreeViewNode:"application/x-grapoza-treeviewnode"});function Me(){function n(r,l){return(r.closest?r:r.parentElement).closest(l)}return{closest:n}}const{closest:ze}=Me();function Be(n,r,l,f){const{unfocus:s}=O(),u=n.value.treeNodeSpec;function h(c){const b=r.value.indexOf(c);b>-1&&r.value.splice(b,1)}function t(c,b){c.siblingNodeSet=c.siblingNodeSet||r.value,f(i.Drop,c,b)}function o(c){c.stopPropagation();let b=JSON.parse(JSON.stringify(n.value));s(b),b=JSON.stringify(b),u._.dragging=!0,c.dataTransfer.effectAllowed=u.dataTransferEffectAllowed,c.dataTransfer.setData(j.TreeViewNode,`{"treeId":"${l.value}","data":${b}}`),c.dataTransfer.setData(j.Json,b),c.dataTransfer.setData(j.PlainText,b)}function a(c){x(c)&&(m(c,!0),c.preventDefault())}function p(c){x(c)&&(m(c,!0),c.preventDefault())}function y(c){x(c)&&m(c,!1)}function N(c){const b=JSON.parse(c.dataTransfer.getData(j.TreeViewNode)),A=c.target.classList.contains("grtvn-self-prev-target")?$.Before:c.target.classList.contains("grtvn-self-next-target")?$.After:$.Child,C={isSameTree:b.treeId===l.value,droppedModel:b.data,targetModel:n.value,siblingNodeSet:A===$.Child?r.value:null,dropEffect:c.dataTransfer.dropEffect,targetZone:A};f(i.Drop,C,c),m(c,!1),c.preventDefault()}function S(c){c.dataTransfer.dropEffect===ye.Move?u._.dragMoved?delete u._.dragMoved:f(i.DragMove,n.value,c):(m(c,!1),u._.dragging=!1)}function x(c){return u.allowDrop&&c.dataTransfer.types.includes(j.TreeViewNode)&&!ze(c.target,".grtvn-dragging")}function m(c,b){const A=c.target.classList&&c.target.classList.contains("grtvn-self-prev-target"),C=c.target.classList&&c.target.classList.contains("grtvn-self-next-target");u._.isDropTarget=b,A?(u._.isPrevDropTarget=b,u._.isChildDropTarget=!1):C?(u._.isNextDropTarget=b,u._.isChildDropTarget=!1):u._.isChildDropTarget=b}return{dragMoveChild:h,drop:t,onDragstart:o,onDragenter:a,onDragover:p,onDragleave:y,onDrop:N,onDragend:S}}function je(n,r,l,f){const{focus:s,focusFirst:u,focusLast:h,focusNext:t,focusPrevious:o,isFocused:a,unfocus:p}=O(),y=e.computed(()=>n.value[n.value.treeNodeSpec.childrenProperty]);e.watch(()=>n.value.treeNodeSpec.focusable,function(C){C===!0&&(f.value&&r.value.focus(),l(i.FocusableChange,n.value))});function N(){s(n)}function S(){p(n)}function x(){return a(n)}function m(){u(y.value)}function c(){h(y.value)}function b(C,q){t(y.value,C,q)||l(i.RequestNextFocus,e.unref(n),!0)}function A(C){o(y.value,C)||N()}return{focusNode:N,unfocusNode:S,isFocusedNode:x,focusFirstChild:m,focusLastChild:c,focusNextNode:b,focusPreviousNode:A}}function Ke(n,r,l){const{deselect:f,isSelectable:s,isSelected:u,setSelected:h,select:t}=Z();e.watch(()=>n.value.treeNodeSpec.state.selected,()=>{l(i.SelectedChange,n.value)}),e.watch(()=>n.value.treeNodeSpec.focusable,function(m){N()&&r.value===V.SelectionFollowsFocus&&p(m)});function o(){t(n)}function a(){f(n)}function p(m){h(n,m)}function y(){s(n)&&[V.Single,V.Multiple].includes(r.value)&&h(n,!S())}function N(){return s(n)}function S(){return u(n)}return{ariaSelected:e.computed(()=>r.value===V.None||!N()?null:r.value!==V.Multiple?S()?!0:null:S()),deselectNode:a,isNodeSelectable:N,isNodeSelected:S,setNodeSelected:p,selectNode:o,toggleNodeSelected:y}}function He(n,r){const{isExpandable:l,isExpanded:f}=me(),{loadChildren:s,mayHaveChildren:u}=xe(n,r),h=e.computed(()=>t.value?a():null),t=e.computed(()=>u.value&&o());e.watch(()=>n.value.treeNodeSpec.state.expanded,async function(){r(i.ExpandedChange,n.value),a()&&await s()});function o(){return l(n)}function a(){return f(n)}function p(){return t.value&&a()?(n.value.treeNodeSpec.state.expanded=!1,!0):!1}function y(){return t.value&&!a()?(n.value.treeNodeSpec.state.expanded=!0,!0):!1}function N(){return a()?p():y()}return{ariaExpanded:h,canExpand:t,collapseNode:p,expandNode:y,isNodeExpandable:o,isNodeExpanded:a,toggleNodeExpanded:N}}const ut="",Je=["id","tabindex","aria-expanded","aria-selected"],Ge=["draggable","dragging"],Ue=["id","title"],Ze=["for","title"],Qe=["id","disabled"],We=["for","title"],ve=["id","name","value","disabled"],Xe=["title"],Ye=["id","title"],_e=["id","title"],et=["aria-hidden"],tt={__name:"TreeViewNode",props:{ariaKeyMap:{type:Object,required:!0},depth:{type:Number,required:!0},initialModel:{type:Object,required:!0},initialRadioGroupValues:{type:Object,required:!0},isMounted:{type:Boolean,required:!0},modelDefaults:{type:Object,required:!0},selectionMode:{type:String,required:!1,default:V.None,validator:function(n){return Object.values(V).includes(n)}},treeId:{type:String,required:!0}},emits:[i.Add,i.Click,i.CheckboxChange,i.ChildCheckboxChange,i.ChildrenLoad,i.Delete,i.DoubleClick,i.DragMove,i.Drop,i.ExpandedChange,i.FocusableChange,i.RadioChange,i.RequestFirstFocus,i.RequestLastFocus,i.RequestNextFocus,i.RequestParentFocus,i.RequestPreviousFocus,i.SelectedChange],setup(n,{emit:r}){const l=n,f="input, .grtvn-self-expander, .grtvn-self-expander *, .grtvn-self-action, .grtvn-self-action *",s=e.ref(l.initialModel),u=e.ref(l.initialRadioGroupValues),h=e.ref(null),t=e.computed(()=>`${A.value}-add-child`),o=e.computed(()=>ue()?0:-1),a=e.computed(()=>{var d,g;return(g=(d=C.value.customizations)==null?void 0:d.classes)!=null?g:{}}),p=e.computed(()=>`${A.value}-delete`),y=e.computed(()=>`${A.value}-exp`),N=e.computed(()=>s.value[S.value]),S=e.computed(()=>{var d;return(d=C.value.idProperty)!=null?d:"id"}),x=e.computed(()=>`${A.value}-input`),m=e.computed(()=>l.selectionMode!==V.None&&H()&&pe()),c=e.computed(()=>s.value[b.value]),b=e.computed(()=>{var d;return(d=C.value.labelProperty)!=null?d:"label"}),A=e.computed(()=>`${l.treeId}-${N.value}`),C=e.computed(()=>s.value.treeNodeSpec),q=e.computed(()=>l.treeId),{normalizeNodeData:re}=$e(s,l.modelDefaults,u);re();const{addChild:K,areChildrenLoaded:Q,areChildrenLoading:le,children:I,deleteChild:ae,hasChildren:ie,mayHaveChildren:se}=xe(s,r),{focus:de,isFocused:ce}=O(),{focusNode:W,focusNextNode:v,focusPreviousNode:X,isFocusedNode:ue}=je(s,h,r,e.toRef(l,"isMounted")),{ariaSelected:fe,isNodeSelectable:H,isNodeSelected:pe,toggleNodeSelected:Y}=Ke(s,e.toRef(l,"selectionMode"),r),{ariaExpanded:ge,canExpand:Ne,collapseNode:T,expandNode:k,isNodeExpanded:J,toggleNodeExpanded:G}=He(s,r),{dragMoveChild:_,drop:D,onDragstart:E,onDragenter:R,onDragover:M,onDragleave:ee,onDrop:Te,onDragend:De}=Be(s,I,q,r);function we(d){r(i.CheckboxChange,s.value,d)}function Fe(d){r(i.RadioChange,s.value,d)}function lt(d){d.target.matches(f)||(r(i.Click,s.value,d),Y()),W()}function at(d){d.target.matches(f)||r(i.DoubleClick,s.value,d)}function Ee(d){C.value.deletable&&r(i.Delete,s.value)}function it(d){let g=!0;if(!(d.altKey||d.ctrlKey||d.metaKey||d.shift)){if(l.ariaKeyMap.activateItem.includes(d.keyCode)){if(C.value.input&&!C.value.state.input.disabled){let te=h.value.querySelector(".grtvn-self"),w=te.querySelector(".grtvn-self-input")||te.querySelector("input");if(w){let ne=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});w.dispatchEvent(ne)}}}else l.ariaKeyMap.selectItem.includes(d.keyCode)?Y():l.ariaKeyMap.expandFocusedItem.includes(d.keyCode)?se.value&&!le.value&&!k()&&J()&&de(I.value[0]):l.ariaKeyMap.collapseFocusedItem.includes(d.keyCode)?T()||r(i.RequestParentFocus):l.ariaKeyMap.focusFirstItem.includes(d.keyCode)?r(i.RequestFirstFocus):l.ariaKeyMap.focusLastItem.includes(d.keyCode)?r(i.RequestLastFocus):l.ariaKeyMap.focusPreviousItem.includes(d.keyCode)?r(i.RequestPreviousFocus,s.value):l.ariaKeyMap.focusNextItem.includes(d.keyCode)?r(i.RequestNextFocus,s.value,!1):l.ariaKeyMap.insertItem.includes(d.keyCode)?K():l.ariaKeyMap.deleteItem.includes(d.keyCode)?Ee():g=!1;g&&(d.stopPropagation(),d.preventDefault())}}function st(d){I.value.indexOf(d)>-1&&(ce(d)&&(I.value.length>1&&I.value.indexOf(d)===0?v(d):X(d)),ae(d))}function dt(d,g){r(i.CheckboxChange,d,g),I.value.includes(d)&&r(i.ChildCheckboxChange,s.value,d,g)}return(!N.value||typeof N.value!="number"&&typeof N.value!="string")&&console.error(`initialModel id is required and must be a number or string. Expected prop ${S.value} to exist on the model.`),(!c.value||typeof c.value!="string")&&console.error(`initialModel label is required and must be a string. Expected prop ${b.value} to exist on the model.`),(d,g)=>{const te=e.resolveComponent("TreeViewNode",!0);return e.openBlock(),e.createElementBlock("li",{id:e.unref(A),ref_key:"nodeElement",ref:h,class:e.normalizeClass(["grtvn",[e.unref(a).treeViewNode,e.unref(C)._.dragging?"grtvn-dragging":""]]),role:"treeitem",tabindex:e.unref(o),"aria-expanded":e.unref(ge),"aria-selected":e.unref(fe),onKeydown:it},[e.createElementVNode("div",{class:e.normalizeClass(["grtvn-self",[e.unref(a).treeViewNodeSelf,e.unref(m)?"grtvn-self-selected":"",e.unref(m)?e.unref(a).treeViewNodeSelfSelected:"",e.unref(C)._.isDropTarget?"grtvn-self-drop-target":"",e.unref(C)._.isChildDropTarget?"grtvn-self-child-drop-target":""]]),draggable:e.unref(C).draggable,dragging:e.unref(C)._.dragging,onClick:lt,onDblclick:at,onDragend:g[4]||(g[4]=(...w)=>e.unref(De)&&e.unref(De)(...w)),onDragenter:g[5]||(g[5]=(...w)=>e.unref(R)&&e.unref(R)(...w)),onDragleave:g[6]||(g[6]=(...w)=>e.unref(ee)&&e.unref(ee)(...w)),onDragover:g[7]||(g[7]=(...w)=>e.unref(M)&&e.unref(M)(...w)),onDragstart:g[8]||(g[8]=(...w)=>e.unref(E)&&e.unref(E)(...w)),onDrop:g[9]||(g[9]=(...w)=>e.unref(Te)&&e.unref(Te)(...w))},[e.createElementVNode("div",{class:e.normalizeClass(["grtvn-self-sibling-drop-target grtvn-self-prev-target",[e.unref(C)._.isPrevDropTarget?"grtvn-self-sibling-drop-target-hover":""]])},null,2),e.unref(Ne)?(e.openBlock(),e.createElementBlock("button",{key:0,id:e.unref(y),type:"button","aria-hidden":"true",tabindex:"-1",title:e.unref(C).expanderTitle,class:e.normalizeClass(["grtvn-self-expander",[e.unref(a).treeViewNodeSelfExpander,e.unref(C).state.expanded?"grtvn-self-expanded":"",e.unref(C).state.expanded?e.unref(a).treeViewNodeSelfExpanded:""]]),onClick:g[0]||(g[0]=(...w)=>e.unref(G)&&e.unref(G)(...w))},[e.createElementVNode("i",{class:e.normalizeClass(["grtvn-self-expanded-indicator",e.unref(a).treeViewNodeSelfExpandedIndicator])},null,2)],10,Ue)):(e.openBlock(),e.createElementBlock("span",{key:1,class:e.normalizeClass(["grtvn-self-spacer",e.unref(a).treeViewNodeSelfSpacer])},null,2)),e.unref(C).input&&e.unref(C).input.type==="checkbox"?e.renderSlot(d.$slots,"checkbox",{key:2,model:s.value,customClasses:e.unref(a),inputId:e.unref(x),checkboxChangeHandler:we},()=>[e.createElementVNode("label",{for:e.unref(x),title:e.unref(C).title,class:e.normalizeClass(["grtvn-self-label",e.unref(a).treeViewNodeSelfLabel])},[e.withDirectives(e.createElementVNode("input",{id:e.unref(x),tabindex:"-1",class:e.normalizeClass(["grtvn-self-input grtvn-self-checkbox",[e.unref(a).treeViewNodeSelfInput,e.unref(a).treeViewNodeSelfCheckbox]]),type:"checkbox",disabled:e.unref(C).state.input.disabled,"onUpdate:modelValue":g[1]||(g[1]=w=>e.unref(C).state.input.value=w),onChange:we},null,42,Qe),[[e.vModelCheckbox,e.unref(C).state.input.value]]),e.createTextVNode(" "+e.toDisplayString(e.unref(c)),1)],10,Ze)]):e.unref(C).input&&e.unref(C).input.type==="radio"?e.renderSlot(d.$slots,"radio",{key:3,model:s.value,customClasses:e.unref(a),inputId:e.unref(x),radioGroupValues:u.value,radioChangeHandler:Fe},()=>[e.createElementVNode("label",{for:e.unref(x),title:e.unref(C).title,class:e.normalizeClass(["grtvn-self-label",e.unref(a).treeViewNodeSelfLabel])},[e.withDirectives(e.createElementVNode("input",{id:e.unref(x),tabindex:"-1",class:e.normalizeClass(["grtvn-self-input grtvn-self-radio",[e.unref(a).treeViewNodeSelfInput,e.unref(a).treeViewNodeSelfRadio]]),type:"radio",name:e.unref(C).input.name,value:e.unref(C).input.value,disabled:e.unref(C).state.input.disabled,"onUpdate:modelValue":g[2]||(g[2]=w=>u.value[e.unref(C).input.name]=w),onChange:Fe},null,42,ve),[[e.vModelRadio,u.value[e.unref(C).input.name]]]),e.createTextVNode(" "+e.toDisplayString(e.unref(c)),1)],10,We)]):e.renderSlot(d.$slots,"text",{key:4,model:s.value,customClasses:e.unref(a)},()=>[e.createElementVNode("span",{title:e.unref(C).title,class:e.normalizeClass(["grtvn-self-text",e.unref(a).treeViewNodeSelfText])},e.toDisplayString(e.unref(c)),11,Xe)]),e.unref(C).addChildCallback?(e.openBlock(),e.createElementBlock("button",{key:5,id:e.unref(t),type:"button","aria-hidden":"true",tabindex:"-1",title:e.unref(C).addChildTitle,class:e.normalizeClass(["grtvn-self-action",[e.unref(a).treeViewNodeSelfAction,e.unref(a).treeViewNodeSelfAddChild]]),onClick:g[3]||(g[3]=(...w)=>e.unref(K)&&e.unref(K)(...w))},[e.createElementVNode("i",{class:e.normalizeClass(["grtvn-self-add-child-icon",e.unref(a).treeViewNodeSelfAddChildIcon])},null,2)],10,Ye)):e.createCommentVNode("",!0),e.unref(C).deletable?(e.openBlock(),e.createElementBlock("button",{key:6,id:e.unref(p),type:"button","aria-hidden":"true",tabindex:"-1",title:e.unref(C).deleteTitle,class:e.normalizeClass(["grtvn-self-action",[e.unref(a).treeViewNodeSelfAction,e.unref(a).treeViewNodeSelfDelete]]),onClick:Ee},[e.createElementVNode("i",{class:e.normalizeClass(["grtvn-self-delete-icon",e.unref(a).treeViewNodeSelfDeleteIcon])},null,2)],10,_e)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass(["grtvn-self-sibling-drop-target grtvn-self-next-target",[e.unref(C)._.isNextDropTarget?"grtvn-self-sibling-drop-target-hover":""]])},null,2)],42,Ge),e.createElementVNode("div",{class:e.normalizeClass(["grtvn-children-wrapper",e.unref(a).treeViewNodeChildrenWrapper])},[e.unref(C).state.expanded&&!e.unref(Q)?e.renderSlot(d.$slots,"loading",{key:0,model:s.value,customClasses:e.unref(a)},()=>[e.createElementVNode("span",{class:e.normalizeClass(["grtvn-loading",e.unref(a).treeViewNodeLoading])}," ... ",2)]):e.createCommentVNode("",!0),e.unref(ie)?e.withDirectives((e.openBlock(),e.createElementBlock("ul",{key:1,class:e.normalizeClass(["grtvn-children",e.unref(a).treeViewNodeChildren]),role:"group","aria-hidden":!e.unref(C).state.expanded},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(I),w=>{var ne,Ve;return e.openBlock(),e.createBlock(te,{key:w[(Ve=(ne=w.treeNodeSpec)==null?void 0:ne.idProperty)!=null?Ve:"id"],depth:n.depth+1,"initial-model":w,"model-defaults":n.modelDefaults,"parent-id":e.unref(N),"selection-mode":n.selectionMode,"tree-id":e.unref(q),"initial-radio-group-values":u.value,"aria-key-map":n.ariaKeyMap,"is-mounted":n.isMounted,onTreeNodeClick:g[10]||(g[10]=(F,P)=>d.$emit(e.unref(i).Click,F,P)),onTreeNodeDblclick:g[11]||(g[11]=(F,P)=>d.$emit(e.unref(i).DoubleClick,F,P)),onTreeNodeCheckboxChange:dt,onTreeNodeChildCheckboxChange:g[12]||(g[12]=(F,P,U)=>d.$emit(e.unref(i).ChildCheckboxChange,F,P,U)),onTreeNodeRadioChange:g[13]||(g[13]=(F,P)=>d.$emit(e.unref(i).RadioChange,F,P)),onTreeNodeExpandedChange:g[14]||(g[14]=F=>d.$emit(e.unref(i).ExpandedChange,F)),onTreeNodeChildrenLoad:g[15]||(g[15]=F=>d.$emit(e.unref(i).ChildrenLoad,F)),onTreeNodeSelectedChange:g[16]||(g[16]=F=>d.$emit(e.unref(i).SelectedChange,F)),onTreeNodeAdd:g[17]||(g[17]=(F,P)=>d.$emit(e.unref(i).Add,F,P)),onTreeNodeDelete:st,onTreeNodeAriaFocusableChange:g[18]||(g[18]=F=>d.$emit(e.unref(i).FocusableChange,F)),onTreeNodeAriaRequestParentFocus:g[19]||(g[19]=()=>e.unref(W)()),onTreeNodeAriaRequestFirstFocus:g[20]||(g[20]=()=>d.$emit(e.unref(i).RequestFirstFocus)),onTreeNodeAriaRequestLastFocus:g[21]||(g[21]=()=>d.$emit(e.unref(i).RequestLastFocus)),onTreeNodeAriaRequestPreviousFocus:e.unref(X),onTreeNodeAriaRequestNextFocus:e.unref(v),onTreeNodeDragMove:e.unref(_),onTreeNodeDrop:e.unref(D)},{checkbox:e.withCtx(({model:F,customClasses:P,inputId:U,checkboxChangeHandler:Ce})=>[e.renderSlot(d.$slots,"checkbox",{model:F,customClasses:P,inputId:U,checkboxChangeHandler:Ce})]),radio:e.withCtx(({model:F,customClasses:P,inputId:U,radioGroupValues:Ce,radioChangeHandler:ct})=>[e.renderSlot(d.$slots,"radio",{model:F,customClasses:P,inputId:U,radioGroupValues:Ce,radioChangeHandler:ct})]),text:e.withCtx(({model:F,customClasses:P})=>[e.renderSlot(d.$slots,"text",{model:F,customClasses:P})]),loading:e.withCtx(({model:F,customClasses:P})=>[e.renderSlot(d.$slots,"loading",{model:F,customClasses:P})]),_:2},1032,["depth","initial-model","model-defaults","parent-id","selection-mode","tree-id","initial-radio-group-values","aria-key-map","is-mounted","onTreeNodeAriaRequestPreviousFocus","onTreeNodeAriaRequestNextFocus","onTreeNodeDragMove","onTreeNodeDrop"])}),128))],10,et)),[[e.vShow,e.unref(C).state.expanded]]):e.createCommentVNode("",!0)],2)],42,Je)}}},ft="",nt=e.createElementVNode("span",{class:"grtv-loading"}," ... ",-1),ot=["aria-multiselectable"],rt={__name:"TreeView",props:{customAriaKeyMap:{type:Object,required:!1,default:function(){return{}},validator:function(n){for(const r in n)if(!Array.isArray(n[r])||n[r].some(l=>!Number.isInteger(l)))return console.error(`customAriaKeyMap properties must be Arrays of numbers (corresponding to keyCodes); property '${r}' fails check.`),!1;return!0}},initialModel:{type:Array,required:!1,default:function(){return[]}},loadNodesAsync:{type:Function,required:!1,default:null},modelDefaults:{type:Object,required:!1,default:function(){return{}}},selectionMode:{type:String,required:!1,default:V.None,validator:function(n){return Object.values(V).includes(n)}},skinClass:{type:String,required:!1,default:"grtv-default-skin",validator:function(n){return n===null||!n.match(/\s/)}}},emits:[i.Add,i.CheckboxChange,i.ChildrenLoad,i.ChildCheckboxChange,i.Click,i.Delete,i.DoubleClick,i.ExpandedChange,i.RadioChange,i.RootNodesLoad,i.SelectedChange],setup(n,{expose:r,emit:l}){const f=n,s=e.readonly({activateItem:[32],selectItem:[13],focusLastItem:[35],focusFirstItem:[36],collapseFocusedItem:[37],expandFocusedItem:[39],focusPreviousItem:[38],focusNextItem:[40],insertItem:[45],deleteItem:[46]}),u=e.ref(!1),h=e.ref(!1),t=e.ref(f.initialModel),o=e.ref({}),a=e.ref(""),p=e.ref(null),{generateUniqueId:y}=he(),{depthFirstTraverse:N}=oe(t),{focusableNodeModel:S,handleFocusableChange:x}=Pe(),{focus:m,focusFirst:c,focusLast:b,focusNext:A,focusPrevious:C,isFocused:q,unfocus:re}=O(),{ariaMultiselectable:K,enforceSelectionMode:Q,handleNodeSelectedChange:le}=Ae(t,e.toRef(f,"selectionMode"),S,l),{isSelectable:I,isSelected:ae,select:ie}=Z(e.toRef(f,"selectionMode")),{findById:se,getCheckedCheckboxes:de,getCheckedRadioButtons:ce,getMatching:W,getSelected:v,removeById:X}=qe(t,o,e.toRef(f,"selectionMode")),{dragMoveNode:ue,drop:fe}=Le(t,a,se,X),H=e.computed(()=>typeof f.loadNodesAsync!="function"||u.value),pe=e.computed(()=>Object.assign({},s,f.customAriaKeyMap));e.onMounted(async()=>{if(await Y(),p.value.id&&(a.value=p.value.id),t.value.length>0){let T=null;N(k=>{q(k)&&(S.value?re(k):S.value=k),f.selectionMode!==V.None&&T===null&&ae(k)&&(T=k)}),S.value||(S.value=T||t.value[0],m(S)),T===null&&I(S)&&f.selectionMode===V.SelectionFollowsFocus&&ie(S),Q()}e.nextTick(()=>{f.selectionMode===V.Single&&Q(),h.value=!0})});async function Y(){if(!H.value){var T=await f.loadNodesAsync();T&&(u.value=!0,t.value.splice(0,t.value.length,...T),l(i.RootNodesLoad,t.value))}}function ge(T){let k=t.value.indexOf(T);k>-1&&(Ne(T),t.value.splice(k,1)),l(i.Delete,T)}function Ne(T){q(T)&&(t.value.indexOf(T)===0?t.value.length>0&&A(t.value,T):C(t.value,T))}return a.value=y(),r({getCheckedCheckboxes:de,getCheckedRadioButtons:ce,getMatching:W,getSelected:v}),(T,k)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"treeElement",ref:p,class:e.normalizeClass(["grtv-wrapper",n.skinClass])},[e.unref(H)?e.createCommentVNode("",!0):e.renderSlot(T.$slots,"loading-root",{key:0},()=>[nt]),e.unref(H)?(e.openBlock(),e.createElementBlock("ul",{key:1,class:"grtv",role:"tree","aria-multiselectable":e.unref(K)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.value,J=>{var G,_;return e.openBlock(),e.createBlock(tt,{key:J[(_=(G=J.treeNodeSpec)==null?void 0:G.idProperty)!=null?_:"id"],"aria-key-map":e.unref(pe),depth:0,"model-defaults":n.modelDefaults,"initial-model":J,"selection-mode":n.selectionMode,"tree-id":a.value,"is-mounted":h.value,"initial-radio-group-values":o.value,onTreeNodeClick:k[0]||(k[0]=(D,E)=>T.$emit(e.unref(i).Click,D,E)),onTreeNodeDblclick:k[1]||(k[1]=(D,E)=>T.$emit(e.unref(i).DoubleClick,D,E)),onTreeNodeCheckboxChange:k[2]||(k[2]=(D,E)=>T.$emit(e.unref(i).CheckboxChange,D,E)),onTreeNodeChildCheckboxChange:k[3]||(k[3]=(D,E,R)=>T.$emit(e.unref(i).ChildCheckboxChange,D,E,R)),onTreeNodeRadioChange:k[4]||(k[4]=(D,E)=>T.$emit(e.unref(i).RadioChange,D,E)),onTreeNodeExpandedChange:k[5]||(k[5]=D=>T.$emit(e.unref(i).ExpandedChange,D)),onTreeNodeChildrenLoad:k[6]||(k[6]=D=>T.$emit(e.unref(i).ChildrenLoad,D)),onTreeNodeSelectedChange:e.unref(le),onTreeNodeAdd:k[7]||(k[7]=(D,E)=>T.$emit(e.unref(i).Add,D,E)),onTreeNodeDelete:ge,onTreeNodeAriaFocusableChange:e.unref(x),onTreeNodeAriaRequestFirstFocus:k[8]||(k[8]=D=>e.unref(c)(t.value)),onTreeNodeAriaRequestLastFocus:k[9]||(k[9]=D=>e.unref(b)(t.value)),onTreeNodeAriaRequestPreviousFocus:k[10]||(k[10]=D=>e.unref(C)(t.value,D)),onTreeNodeAriaRequestNextFocus:k[11]||(k[11]=(D,E)=>e.unref(A)(t.value,D,E)),onTreeNodeDragMove:e.unref(ue),onTreeNodeDrop:e.unref(fe)},{checkbox:e.withCtx(({model:D,customClasses:E,inputId:R,checkboxChangeHandler:M})=>[e.renderSlot(T.$slots,"checkbox",{model:D,customClasses:E,inputId:R,checkboxChangeHandler:M})]),radio:e.withCtx(({model:D,customClasses:E,inputId:R,radioGroupValues:M,radioChangeHandler:ee})=>[e.renderSlot(T.$slots,"radio",{model:D,customClasses:E,inputId:R,radioGroupValues:M,radioChangeHandler:ee})]),text:e.withCtx(({model:D,customClasses:E})=>[e.renderSlot(T.$slots,"text",{model:D,customClasses:E})]),loading:e.withCtx(({model:D,customClasses:E})=>[e.renderSlot(T.$slots,"loading",{model:D,customClasses:E})]),_:2},1032,["aria-key-map","model-defaults","initial-model","selection-mode","tree-id","is-mounted","initial-radio-group-values","onTreeNodeSelectedChange","onTreeNodeAriaFocusableChange","onTreeNodeDragMove","onTreeNodeDrop"])}),128))],8,ot)):e.createCommentVNode("",!0)],2))}};L.TreeView=rt,Object.defineProperties(L,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
